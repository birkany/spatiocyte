# Global path environment variables used by E-Cell in MS-Windows
# All variables should be declared in this file, and sourced (merged) from it 
# Author: Satya Arjunan < satya@sfc.keio.ac.jp >

import os
import sys

os.environ['PACKAGE'] = '@PACKAGE@'
os.environ['VERSION'] = '@VERSION@'

# Get installed E-Cell prefix
prefix = os.path.split(sys.prefix)[0]

os.environ['ECELL3_PREFIX']=\
	prefix

os.environ['OSOGOPATH']=\
	os.path.join( prefix, 'lib', 'osogo' )

os.environ['MEPATH']=\
	os.path.join( prefix, 'lib', 'modeleditor' )

os.environ['TLPATH']=\
	os.path.join( prefix, 'lib', 'toollauncher' )

os.environ['LTDL_LIBRARY_PATH']=\
	os.path.join( prefix, 'lib', 'ecell', os.environ['VERSION'] )

os.environ['VVECTORTMPDIR']=\
	os.environ['TMP']

# PYTHONDIR contains E-Cell, pygtk and Numeric python modules
# PYTHONDIR is used by dmgen
os.environ['PYTHONDIR']=\
	os.path.join( prefix, 'lib', 'python' + sys.winver, 'site-packages' )

# Include E-Cell python module location in Python module search path
os.environ['PYTHONPATH']=\
	os.environ['PYTHONDIR']
	
# BOOST_LIBRARIES is used by ecell3-dmc		
os.environ['BOOST_LIBRARIES']=\
	'-L' + os.path.join( prefix, 'lib' ) + ' -lboost_python'

# Get installed Python prefix from Windows registry
import _winreg
try:
	key = _winreg.OpenKey( _winreg.HKEY_LOCAL_MACHINE, \
		r'Software\Python\PythonCore\%s' % (sys.winver) )
except:
	print "Could not find Python in registry"
	sys.exit(1)

python_prefix = os.path.abspath( _winreg.QueryValue( key, 'InstallPath' ) )
_winreg.CloseKey( key )

os.environ['PATH']=\
	os.pathsep.join([
		os.path.join( prefix, 'bin' ),
		os.path.join( prefix, 'lib' ),
		python_prefix,
		os.environ['PATH']
	])

# Set sys.path to point to all locations of Python modules
sys.path = [
	python_prefix,
	os.environ['PYTHONDIR'],
	os.path.join( python_prefix, 'lib', 'site-packages' ),
	os.path.join( python_prefix, 'lib', 'site-packages', 'Numeric'),
	os.path.join( python_prefix, 'lib', 'site-packages', 'gtk-2.0'),
	os.environ['OSOGOPATH'],
	os.path.join( python_prefix, 'DLLs' ),
	os.path.join( python_prefix, 'lib' ),
	os.path.join( python_prefix, 'lib', 'plat-win'),
	os.path.join( python_prefix, 'lib', 'lib-tk' )
]

